<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="css/gallery.css" rel="stylesheet" type="text/css" media="all" >
<link href="/css/effects.css" rel="stylesheet" type="text/css" media="all" >

<link rel='shortcut icon' type='image/jpg' href ='assets/favicon.ico'/>
    
</head>
<div id="gallery">
    <!-- Start of loading overlay -->
    <div id="galleryLoader" >
        <div style="text-align: center; align-content: center; margin-top: -60px;">
            <img src="https://kingposs.com/assets/hourglass.gif" alt="Loading..." >
            <p>Loading...</p>
        </div>
    </div>
    <!-- End of loading overlay -->

    <!-- Gallery items will be here -->
</div>
<div id="myModal" class="modal">
    <span class="close">&times;</span>
    <img id="loadingPlaceholder" class="loading" src="https://kingposs.com/assets/hourglass.gif"></img>
    <img class="modal-content" id="img01">
    <div id="title"></div>
    <div id="caption"></div>
</div>

<script>
var imageArray = [

  {
    thumbnailSrc: "https://kingposs.com/assets/thumbnails/thumbnail_caesar.jpg", //The thumbnail! 
    fullSrc: "https://kingposs.com/assets/art/caesar.jpg", //The full image, shows up in Modality
    title: "Example title", //The title
    description: "Example description", // The description, Shows up in modality
  }, 

  {
    thumbnailSrc: "https://kingposs.com/assets/thumbnails/thumbnail_HERBERT THE SNAIL THE WORM.jpg",
    fullSrc: "https://kingposs.com/assets/art/HERBERT THE SNAIL THE WORM.jpg",
    title: "Herbert 'The Snail' The Worm",
    description: "This is Herbert 'The Snail' The Worm! He is a creation of my sister who I decided to 3d model. Would you sit and enjoy a cup of tea with this lonely viator?"
  },

    ];

    function displayImages() {
        var gallery = document.getElementById('gallery');
        gallery.innerHTML = '';

        imageArray.forEach(function(imgData) {
            var container = document.createElement('div');
            container.className = 'imageContainer';

            var img = document.createElement('img');
            img.src = imgData.thumbnailSrc;

            img.onclick = function() {
            var modal = document.getElementById("myModal");
            var modalImg = document.getElementById("img01");
            var titleText = document.getElementById("title");
            var captionText = document.getElementById("caption");
            var loadingPlaceholder = document.getElementById("loadingPlaceholder");

            // Show modal and loading placeholder
            modal.style.display = "block";
            loadingPlaceholder.style.display = "block";
            modalImg.style.display = "none"; // Hide the actual image initially
            document.body.style.overflow = "hidden";  // Hide the scrollbar on the body

            // Load the image
            var newImage = new Image();
            newImage.src = this.dataset.fullSrc;

            newImage.onload = function() {
                loadingPlaceholder.style.display = "none";
                modalImg.src = this.src;
                modalImg.style.display = "block";
             };

            newImage.onerror = function() {
                loadingPlaceholder.style.display = "none";
                console.error('Failed to load image:', this.src);
            };

            titleText.innerHTML = this.dataset.title;
            captionText.innerHTML = this.dataset.description;
        };
        img.dataset.fullSrc = imgData.fullSrc;
        img.dataset.title = imgData.title;
        img.dataset.description = imgData.description;

        var title = document.createElement('p');
        title.textContent = imgData.title;
        container.appendChild(img);
        container.appendChild(title);
        gallery.appendChild(container);
        });

        var modal = document.getElementById("myModal");
        var span = document.getElementsByClassName("close")[0];

        span.onclick = function() { 
            modal.style.display = "none";
            document.body.style.overflow = "auto";    // Restore the scrollbar on the body
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
                document.body.style.overflow = "auto";  // Restore the scrollbar on the body
            }
        }
    document.addEventListener("DOMContentLoaded", function() {
    document.getElementById("galleryLoader").style.display = "none";
    });
    }
    
    window.onload = displayImages;

</script>